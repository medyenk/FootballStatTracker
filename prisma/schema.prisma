generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("POSTGRES_URL_NON_POOLING")
}

model Player {
  id   Int    @id @default(autoincrement())
  name String

  // Stat tracking
  attended   Int @default(0)
  win        Int @default(0)
  loss       Int @default(0)
  draw       Int @default(0)
  motm       Int @default(0)
  gotm       Int @default(0)
  cleansheet Int @default(0)

  // üîÅ Required back-relations for Match
  potmMatches  Match[] @relation("Potm")
  gotmMatches  Match[] @relation("Gotm")
  teamAMatches Match[] @relation("TeamA")
  teamBMatches Match[] @relation("TeamB")
}

model Match {
  id   Int      @id @default(autoincrement())
  date DateTime

  teamA Player[] @relation("TeamA")
  teamB Player[] @relation("TeamB")

  winner     String
  teamAScore Int
  teamBScore Int

  potm   Player @relation("Potm", fields: [potmId], references: [id])
  potmId Int

  gotm   Player @relation("Gotm", fields: [gotmId], references: [id])
  gotmId Int
}
